webpackJsonp([1],{MZrC:function(t,e){},NHnr:function(t,e,n){"use strict";function a(t){n("MZrC")}function o(t){n("tkj8")}Object.defineProperty(e,"__esModule",{value:!0});var s=n("7+uW"),i={name:"app"},r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},l=[],c={render:r,staticRenderFns:l},u=c,p=n("VU/8"),m=a,d=p(i,u,!1,m,null,null),h=d.exports,v=n("/ocq"),f=n("BO1k"),y=n.n(f),b=n("//Fk"),g=n.n(b),_={loadScript:function(t){return new g.a(function(e,n){var a;a=document.createElement("script"),a.src=t,a.onload=e,a.onerror=n,document.head.appendChild(a)})}},k={name:"Main",data:function(){return{chatbox:"",msg:"",name:"",socket:null}},methods:{sendMsg:function(){""==this.name?alert("Fill your name bro"):""==this.msg?alert("Type some msg bro"):this.socket.emit("sendMsg",{data:this.name+":"+this.msg})},sendMsgWithEnter:function(t){13==t.keyCode&&this.sendMsg()}},created:function(){var t=this;_.loadScript("https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js").then(function(){t.socket=io.connect("https://connect4arm.herokuapp.com/"),t.socket.on("broadcast",function(e){t.chatbox="";var n=!0,a=!1,o=void 0;try{for(var s,i=y()(e.chattext);!(n=(s=i.next()).done);n=!0){var r=s.value;t.chatbox+=r+"\n"}}catch(t){a=!0,o=t}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}})})}},x=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"main"}},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.chatbox,expression:"chatbox"}],attrs:{rows:"20",cols:"50"},domProps:{value:t.chatbox},on:{input:function(e){e.target.composing||(t.chatbox=e.target.value)}}}),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"type your name!"},domProps:{value:t.name},on:{input:function(e){e.target.composing||(t.name=e.target.value)}}}),n("br"),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.msg,expression:"msg"}],attrs:{type:"text",placeholder:"type some message"},domProps:{value:t.msg},on:{keydown:t.sendMsgWithEnter,input:function(e){e.target.composing||(t.msg=e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"button",value:"send"},on:{click:t.sendMsg}})])},$=[],w={render:x,staticRenderFns:$},C=w,T=n("VU/8"),N=T(k,C,!1,null,null,null),L=(N.exports,{name:"Login",data:function(){return{name:""}},methods:{submit:function(){if(""==this.name)return void alert("please fill the name!");s.a.prototype.$playerName=this.name,this.$router.nav("lobby")}},created:function(){var t=this;this.$router.nav=function(e){return t.$router.push({name:e})}}}),M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Login"}},[n("h1",[t._v("Connect4")]),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text",placeholder:"fill your name",autofocus:""},domProps:{value:t.name},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submit(e)},input:function(e){e.target.composing||(t.name=e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"button",value:"GO!!"},on:{click:t.submit}})])},S=[],F={render:M,staticRenderFns:S},P=F,j=n("VU/8"),E=j(L,P,!1,null,null,null),O=E.exports,D={name:"Chatbox",props:["texts"],data:function(){return{chatTexts:["init"],temp:["dfd","dfdffd","fdfd"]}},methods:{extractPlayerName:function(t){return t.split("Let's play!")[0]},extractSocketId:function(t){return t.split("Let's play!")[1]},join:function(t){var e=t.target.name;this.$socket.emit("requestJoin",{socketId:e})},updateList:function(t){if(null!=t){var e=t.split("\n");this.chatTexts=e,console.log("updated")}}},watch:{texts:function(t,e){this.updateList(t)}},created:function(){this.updateList(this.texts)},updated:function(){this.$refs.Chatbox.scrollTop=this.$refs.Chatbox.scrollHeight}},q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"Chatbox",staticStyle:{"overflow-x":"hidden","overflow-y":"scroll",border:"1px solid grey",width:"500px",height:"200px"},attrs:{id:"Chatbox"}},t._l(t.chatTexts,function(e){return n("div",[-1!=e.indexOf("Let's play!")?n("div",[n("a",[t._v(t._s(t.extractPlayerName(e))+"Let's Play!")]),t._v(" "),n("input",{attrs:{type:"button",value:"join",name:t.extractSocketId(e)},on:{click:t.join}}),n("br")]):n("div",[n("a",[t._v(t._s(e))]),n("br")])])}))},G=[],R={render:q,staticRenderFns:G},U=R,V=n("VU/8"),A=V(D,U,!1,null,null,null),H=A.exports,I={name:"Lobby",data:function(){return{chatTexts:"",message:"",nOnline:0}},methods:{getSocketId:function(){return this.$socket.id},hostGame:function(){this.$socket.emit("requestHost")},submitMessage:function(){if(""==this.message)return void alert("จะไม่พิมพ์สักหน่อยหรอ");this.$socket.emit("sendMessage",{message:this.$playerName+" : "+this.message}),this.message=""}},created:function(){var t=this;this.$router.nav=function(e){return t.$router.push({name:e})},""==this.$playerName&&this.$router.nav("login"),this.$socket.removeAllListeners(),this.$socket.emit("setPlayerName",{playerName:this.$playerName}),this.$socket.emit("requestLeaveGame"),this.$socket.on("playerJoined",function(e){t.$router.nav("play")}),this.$socket.on("reportJoin",function(e){1==e.result?t.$router.nav("play"):alert("too late")}),this.$socket.on("requestName",function(){t.$socket.emit("setPlayerName",{playerName:t.$playerName})}),this.$socket.on("setnOnline",function(e){t.nOnline=e.nOnline}),this.$socket.on("setChatTexts",function(e){t.chatTexts="";var n=!0,a=!1,o=void 0;try{for(var s,i=y()(e.chatTexts);!(n=(s=i.next()).done);n=!0){var r=s.value;t.chatTexts+=r+"\n"}}catch(t){a=!0,o=t}finally{try{!n&&i.return&&i.return()}finally{if(a)throw o}}}),this.$socket.emit("requestLobby")},components:{chatbox:H}},J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Lobby"}},[n("h1",[t._v("หวัดดี "+t._s(t.$playerName))]),t._v(" "),n("h1",[t._v("ผู้เล่นออนไลน์ "+t._s(t.nOnline)+" คน")]),t._v(" "),n("chatbox",{attrs:{texts:t.chatTexts}}),t._v(" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],domProps:{value:t.message},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.submitMessage(e)},input:function(e){e.target.composing||(t.message=e.target.value)}}}),t._v(" "),n("input",{attrs:{type:"button",value:"ส่งข้อความ"},on:{click:t.submitMessage}}),t._v(" "),n("input",{attrs:{type:"button",value:"สร้างเกม"},on:{click:t.hostGame}})],1)},B=[],W={render:J,staticRenderFns:B},Z=W,z=n("VU/8"),K=z(I,Z,!1,null,null,null),Q=K.exports,X={name:"Play",data:function(){return{board:null,p1name:"",p2name:"",playerSide:null,state:"",topCoin:[0,0,0,0,0,0,0],topCoinFlag:0}},created:function(){var t=this;""==this.$playerName&&this.$router.push({name:"login"}),this.$socket.removeAllListeners(),this.$socket.on("reportEnemyDisconnected",function(){"p1"!=t.state&&"p2"!=t.state||(t.state="disconnected")}),this.$socket.on("setGameData",function(e){t.board=e.gameData.board,t.p1name=e.gameData.p1.name,t.p2name=e.gameData.p2.name,t.state=e.gameData.state,t.playerSide=e.playerSide,t.calTopCoin()}),this.$socket.emit("getGameData"),setTimeout(function(){null==t.board&&(""==t.$playerName?t.$router.push({name:"login"}):t.$router.push({name:"lobby"}))},1e3)},methods:{calTopCoin:function(){for(var t=0;t<7;t++)for(var e=5;e>=0;e--)0==this.board[e][t]?(this.topCoin[t]=e,e=-1):0==e&&(this.topCoin[t]=-1)},getBoard:function(t,e){return null==this.board?0:this.board[t][e]},getStatus:function(){return"p1"==this.state?"ตาของ "+this.p1name+"(สีเหลือง)":"p2"==this.state?"ตาของ "+this.p2name+"(สีแดง)":"p1win"==this.state?this.p1name+" เป็นผู้ชนะ!":"p2win"==this.state?this.p2name+" เป็นผู้ชนะ!":void 0},getTileClass:function(t,e){if(null==this.board)return"tile-empty";if(this.topCoin[e]==t&&e==this.topCoinFlag&&this.isMyTurn())return 1==this.playerSide?"tile-yellow":"tile-red";switch(this.board[t][e]){case 0:return"tile-empty";case 1:return"tile-yellow";case 2:return"tile-red"}},goToLobby:function(t){t.preventDefault(),this.$router.nav("lobby")},insert:function(t){this.$socket.emit("insert",{i:t})},isMyTurn:function(){return"p1"==this.state&&1==this.playerSide||"p2"==this.state&&2==this.playerSide},setTopCoinFlag:function(t){this.topCoinFlag=t}}},Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"Play"}},[n("h2",[t._v(t._s(t.p1name)+" (สีเหลือง) vs "+t._s(t.p2name)+" (สีแดง)")]),t._v(" "),"p1"==t.state||"p2"==t.state?[n("h2",[t._v("สถานะเกม : "+t._s(t.getStatus())+" ")])]:t._e(),t._v(" "),"disconnected"==t.state?[n("h2",[t._v("สถานะเกม : ผู้ต่อสู้ออกจากห้องเสียแล้ว เฮ้อ "),n("a",{attrs:{href:""},on:{click:t.goToLobby}},[t._v("กลับไป lobby")])])]:t._e(),t._v(" "),"p1win"==t.state||"p2win"==t.state?[n("h2",[t._v("สถานะเกม : "+t._s(t.getStatus())+" "),n("a",{attrs:{href:""},on:{click:t.goToLobby}},[t._v("กลับไป lobby")])])]:t._e(),t._v(" "),n("div",{staticStyle:{"background-color":"#1645dc",width:"420px"}},[t._l(6,function(e){return[t._l(7,function(a){return[n("button",{class:t.getTileClass(e-1,a-1),attrs:{value:t.getBoard(e-1,a-1)},on:{click:function(e){t.insert(a-1)},mouseover:function(e){t.setTopCoinFlag(a-1)},mouseleave:function(e){t.setTopCoinFlag(-1)}}})]}),t._v(" "),n("br")]})],2),t._v("\n    วิธีเล่น :  "),n("br"),t._v("\n    ผลัดกันหยอดเหรียญคนละตา "),n("br"),t._v("\n    เหรียญใครเรียงติดกัน 4 อันได้ก่อน เป็นผู้ชนะ "),n("br"),t._v("\n    เรียงได้ทั้งแนวนอน แนวตั้ง แนวเฉียง "),n("br")],2)},tt=[],et={render:Y,staticRenderFns:tt},nt=et,at=n("VU/8"),ot=o,st=at(X,nt,!1,ot,null,null),it=st.exports;s.a.use(v.a);var rt=new v.a({routes:[{path:"/",name:"login",component:O},{path:"/lobby",name:"lobby",component:Q},{path:"/play",name:"play",component:it},{path:"*",name:"login",component:O}],mode:"history"});s.a.config.productionTip=!1,_.loadScript("https://cdnjs.cloudflare.com/ajax/libs/socket.io/2.0.4/socket.io.js").then(function(){var t=io.connect("https://connect4arm.herokuapp.com/");s.a.prototype.$playerName="",s.a.prototype.$socket=t,console.log("start new instance"+Math.random()),new s.a({el:"#app",router:rt,template:"<App/>",components:{App:h},socket:t})})},tkj8:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.8892dac4112871301632.js.map